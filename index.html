<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warwick Tracker V4</title>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --bg: #0a0a0a;
            --card: rgba(20, 20, 20, 0.9);
            --green: #0aff6c;
            --red: #ff0a43;
            --text: #eee;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Roboto', sans-serif;
            color: var(--text);
            min-height: 100vh;
            background-image: url('https://ddragon.leagueoflegends.com/cdn/img/champion/splash/Warwick_0.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            overflow-x: hidden;
        }

        /* --- MODE HUD (OVERLAY) --- */
        /* Quand cette classe est active, on cache tout sauf les sorts */
        body.hud-active {
            background: #000 !important; /* Fond noir pour contraste */
            overflow: hidden;
        }
        body.hud-active header,
        body.hud-active #grid,
        body.hud-active .modal, 
        body.hud-active .bg-overlay {
            display: none !important;
        }

        /* Conteneur sp√©cial HUD qui n'apparait que quand actif */
        #hud-container {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            background: rgba(0,0,0,0.8);
        }

        body.hud-active #hud-container { display: flex; }

        /* Style des sorts en mode HUD (Gros boutons) */
        .hud-spells-wrapper {
            display: flex; gap: 20px;
        }
        
        .hud-spell-box {
            width: 100px; height: 100px; /* Tr√®s gros pour cliquer vite */
            position: relative;
            border: 4px solid var(--green);
            border-radius: 10px;
            cursor: pointer;
            background: #000;
        }

        .hud-spell-box.active-cd {
            border-color: red;
            box-shadow: 0 0 20px red;
        }

        .hud-spell-img { width: 100%; height: 100%; object-fit: cover; }

        .hud-timer-text {
            position: absolute; top:0; left:0; width:100%; height:100%;
            display: none; align-items: center; justify-content: center;
            font-size: 3rem; font-weight: bold; color: white;
            background: rgba(0,0,0,0.8); text-shadow: 2px 2px 0 #000;
        }
        .hud-spell-box.active-cd .hud-timer-text { display: flex; }

        .hud-exit-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background: #333; color: #888;
            border: 1px solid #555; cursor: pointer;
            font-size: 0.8rem;
        }

        /* --- FIN CSS HUD --- */

        .bg-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: -1; pointer-events: none; }
        header { text-align: center; padding: 40px 20px; position: relative; }
        .skin-selector { position: absolute; top: 20px; right: 20px; background: rgba(0,0,0,0.8); border: 1px solid var(--green); color: var(--green); padding: 5px 10px; border-radius: 5px; cursor: pointer; }
        h1 { font-family: 'Anton', sans-serif; font-size: 4rem; margin-bottom: 30px; text-shadow: 0 0 20px rgba(10, 255, 108, 0.3); }
        .green { color: var(--green); }
        .search-box { position: relative; max-width: 500px; margin: 0 auto 30px auto; }
        .search-box input { width: 100%; padding: 15px 50px 15px 25px; border-radius: 50px; border: 2px solid #333; outline: none; background: #000; color: white; font-size: 1.2rem; }
        .search-box input:focus { border-color: var(--green); box-shadow: 0 0 15px var(--green); }
        .search-box i { position: absolute; right: 25px; top: 50%; transform: translateY(-50%); color: var(--green); }
        .sorting-controls { display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; margin-bottom: 20px; }
        .sort-btn { background: rgba(0,0,0,0.6); border: 2px solid #444; color: #888; padding: 10px 25px; font-family: 'Anton', sans-serif; font-size: 1.1rem; cursor: pointer; transition: 0.3s; border-radius: 4px; text-transform: uppercase; display: flex; align-items: center; gap: 10px; }
        .sort-btn:hover { transform: translateY(-3px); color: white; border-color: white; }
        .sort-btn.active { background: #111; color: var(--green); border-color: var(--green); box-shadow: 0 0 15px var(--green); }
        
        #grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 30px; padding: 20px 50px; max-width: 1400px; margin: 0 auto; }
        .card { background: var(--card); border: 1px solid #333; border-radius: 8px; overflow: hidden; cursor: pointer; transition: 0.3s; position: relative; }
        .card:hover { transform: translateY(-10px); border-color: var(--green); box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .card img { width: 100%; height: 140px; object-fit: cover; object-position: top; border-bottom: 2px solid var(--green); }
        .card h3 { padding: 15px; text-align: center; font-family: 'Anton'; font-size: 1.5rem; letter-spacing: 1px; margin: 0; }
        .card-wr-badge { position: absolute; bottom: 10px; right: 10px; font-size: 0.9rem; font-weight: bold; color: var(--green); background: rgba(0,0,0,0.9); padding: 4px 8px; border-radius: 4px; border: 1px solid var(--green); }
        .difficulty { position: absolute; top: 10px; right: 10px; padding: 5px 10px; font-size: 0.8rem; font-weight: bold; border-radius: 4px; text-transform: uppercase; color: black; }
        .easy { background: var(--green); } .medium { background: #ffcc00; } .hard { background: var(--red); color: white; }
        .cheese-icon { position: absolute; top: 10px; left: 10px; font-size: 1.5rem; filter: drop-shadow(0 0 5px black); animation: bounce 2s infinite; }
        @keyframes bounce { 0%, 100% {transform: translateY(0);} 50% {transform: translateY(-5px);} }

        /* Modal */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 100; backdrop-filter: blur(5px); }
        .modal-content { background: #111; width: 90%; max-width: 800px; margin: 5% auto; border: 1px solid var(--green); border-radius: 8px; animation: popIn 0.3s; }
        @keyframes popIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        #modal-header { height: 200px; background-size: cover; background-position: center; position: relative; padding: 20px; border-bottom: 2px solid var(--green); display: flex; flex-direction: column; justify-content: flex-end; }
        #modal-header::after { content:''; position: absolute; top:0; left:0; width:100%; height:100%; background: linear-gradient(to top, #111, transparent); }
        .modal-info-row { position: relative; z-index: 2; display: flex; justify-content: space-between; align-items: flex-end; width: 100%; }
        #modal-title { font-family: 'Anton'; font-size: 3.5rem; text-shadow: 3px 3px 0 #000; color: white; margin: 0; line-height: 1; }
        .meta-container { display: flex; flex-direction: column; align-items: flex-end; gap: 5px; }
        
        /* Modal Spell Tracker */
        #summoner-spells { display: flex; gap: 10px; }
        .spell-wrapper { position: relative; width: 50px; height: 50px; cursor: pointer; transition: 0.2s; border-radius: 5px; overflow: hidden; border: 2px solid var(--green); }
        .spell-wrapper.active-cd { border-color: red; box-shadow: 0 0 10px red; }
        .spell-icon { width: 100%; height: 100%; display: block; }
        .spell-timer-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.85); color: white; display: none; align-items: center; justify-content: center; font-weight: bold; font-size: 1.4rem; z-index: 10; }
        .spell-wrapper.active-cd .spell-timer-overlay { display: flex; }
        
        .ult-timer { font-size: 0.9rem; color: #aaa; background: rgba(0,0,0,0.7); padding: 5px 10px; border-radius: 4px; border: 1px solid #444; }
        .ult-timer span { color: var(--green); font-weight: bold; }
        .youtube-btn { display: inline-block; background: #cc0000; color: white; padding: 5px 15px; font-size: 0.9rem; font-weight: bold; text-decoration: none; border-radius: 4px; margin-top: 5px; border: 1px solid #ff4444; transition: 0.2s; }
        .youtube-btn:hover { background: red; transform: scale(1.05); }
        .hud-trigger-btn { display: inline-block; background: #000; color: var(--green); border: 1px solid var(--green); padding: 5px 10px; border-radius: 4px; font-weight: bold; cursor: pointer; margin-top: 5px; font-size: 0.8rem; }
        .hud-trigger-btn:hover { background: var(--green); color: black; }

        .close-btn { position: absolute; top: 20px; right: 30px; font-size: 40px; cursor: pointer; color: white; z-index: 10; transition: 0.2s; }
        .close-btn:hover { color: var(--green); }
        .scoreboard-bar { background: #1a1a1a; border-bottom: 1px solid #333; padding: 15px 30px; display: flex; align-items: center; justify-content: space-between; }
        .stats-display { font-family: 'Anton'; font-size: 1.8rem; color: #fff; }
        .stats-display span { font-size: 1rem; color: #777; font-family: 'Roboto'; margin-left: 10px; }
        .stats-controls { display: flex; gap: 10px; align-items: center; }
        .stat-btn { border: none; padding: 10px 30px; font-weight: bold; cursor: pointer; border-radius: 4px; color: white; font-family: 'Anton'; letter-spacing: 1px; font-size: 1rem; transition: 0.2s; }
        .btn-win { background: #00b894; border: 2px solid #00b894; } .btn-win:hover { background: #00a382; }
        .btn-lose { background: #d63031; border: 2px solid #d63031; } .btn-lose:hover { background: #c0392b; }
        .btn-reset { background: #2d3436; border: 1px solid #636e72; color: #b2bec3; padding: 10px 15px; } .btn-reset:hover { background: #636e72; color: white; }

        .modal-body { padding: 30px; display: flex; flex-direction: column; gap: 20px; }
        .main-content { display: flex; gap: 30px; }
        .strategy-section { flex: 1; }
        .notes-section { flex: 1; display: flex; flex-direction: column; }
        .box { padding: 15px; background: #222; border-radius: 5px; margin-bottom: 20px; border-left: 4px solid #555; }
        .box.pros { border-color: var(--green); } .box.cons { border-color: var(--red); }
        .box h3 { font-size: 1.1rem; color: #fff; margin-bottom: 10px; font-family: 'Anton'; }
        textarea { width: 100%; height: 200px; background: #0a0a0a; border: 1px solid #333; color: var(--green); padding: 15px; resize: none; margin-bottom: 15px; font-family: monospace; font-size: 1rem; }
        textarea:focus { border-color: var(--green); outline: none; }
        #save-btn { width: 100%; padding: 15px; background: var(--green); color: black; border: none; font-weight: bold; cursor: pointer; font-family: 'Anton'; font-size: 1.2rem; transition: 0.3s; }
        #save-btn:hover { background: white; }
        #save-msg { display: block; text-align: center; color: var(--green); margin-top: 10px; opacity: 0; transition: 0.3s; }

        @media (max-width: 800px) {
            .main-content { flex-direction: column; }
            .scoreboard-bar { flex-direction: column; gap: 15px; text-align: center; }
            h1 { font-size: 3rem; }
            .skin-selector { top: 10px; right: 10px; font-size: 0.8rem; }
        }
    </style>
</head>
<body>

    <div class="bg-overlay"></div>

    <div id="hud-container">
        <h2 style="color:white; font-family:'Anton'; margin-bottom:20px; letter-spacing:2px;">HUD TRACKER</h2>
        <div class="hud-spells-wrapper" id="hud-spells-wrapper">
            </div>
        <button class="hud-exit-btn" onclick="toggleHUD(false)">QUITTER HUD</button>
    </div>

    <header>
        <select id="skin-select" class="skin-selector" onchange="changeSkin(this.value)">
            <option value="0">Classique</option>
            <option value="7">Warwick Hy√®ne</option>
            <option value="10">PROJET</option>
            <option value="16">Dieu Ancien</option>
            <option value="19">Hiver √âlu</option>
            <option value="45">Prestige</option>
        </select>

        <h1>WARWICK <span class="green">TOP</span></h1>
        
        <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" id="searchInput" placeholder="Chercher un champion...">
        </div>

        <div class="sorting-controls">
            <button class="sort-btn active" id="sort-name" onclick="sortData('name')">
                <i class="fas fa-font sort-icon"></i> A-Z
            </button>
            <button class="sort-btn" id="sort-wr" onclick="sortData('wr')">
                <i class="fas fa-trophy sort-icon"></i> WINRATE %
            </button>
        </div>
    </header>

    <main id="grid">
        </main>

    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <div id="modal-header">
                <div class="modal-info-row">
                    <h2 id="modal-title">CHAMPION</h2>
                    <div class="meta-container">
                        <div id="summoner-spells"></div>
                        <button class="hud-trigger-btn" onclick="toggleHUD(true)">
                            <i class="fas fa-desktop"></i> MODE HUD (OVERLAY)
                        </button>
                        <div id="ult-timer-display" class="ult-timer" style="margin-top:5px;"></div>
                        <div id="youtube-container"></div>
                    </div>
                </div>
            </div>
            
            <div class="scoreboard-bar">
                <div class="stats-display" id="stats-display">
                    0% WR <span>(0V - 0D)</span>
                </div>
                <div class="stats-controls">
                    <button class="stat-btn btn-win" onclick="addWin()"><i class="fas fa-check"></i> VICTOIRE</button>
                    <button class="stat-btn btn-lose" onclick="addLoss()"><i class="fas fa-times"></i> D√âFAITE</button>
                    <button class="stat-btn btn-reset" onclick="resetStats()" title="Reset"><i class="fas fa-trash"></i></button>
                </div>
            </div>

            <div class="modal-body">
                <div class="main-content">
                    <div class="strategy-section">
                        <div class="box pros">
                            <h3><i class="fas fa-check"></i> POINTS FORTS</h3>
                            <p id="modal-pros"></p>
                        </div>
                        <div class="box cons">
                            <h3><i class="fas fa-times"></i> POINTS FAIBLES</h3>
                            <p id="modal-cons"></p>
                        </div>
                    </div>

                    <div class="notes-section">
                        <h3><i class="fas fa-pencil-alt"></i> MES NOTES</h3>
                        <textarea id="user-notes" placeholder="Mes astuces perso..."></textarea>
                        <button id="save-btn">SAUVEGARDER NOTES</button>
                        <span id="save-msg">Sauvegard√© !</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const spellUrl = (spell) => `https://ddragon.leagueoflegends.com/cdn/13.24.1/img/spell/Summoner${spell}.png`;

        const spellCDs = { "Flash": 300, "Ghost": 240, "Barrier": 180, "Ignite": 180, "Teleport": 360, "Exhaust": 210, "Heal": 240, "Cleanse": 210 };
        let activeTimers = {};
        
        // Champion s√©lectionn√© actuellement (Objet complet)
        let selectedChampion = null;

        const data = [
            { id: "Darius", name: "Darius", diff: "hard", img: "Darius", spells: ["Flash", "Barrier"], ult: "120s / 100s / 80s", cheese: false, pros: "Gagne les courts trades si tu esquives son A (Q) externe.", cons: "5 stacks = mort." },
            { id: "Singed", name: "Singed", diff: "medium", img: "Singed", spells: ["Flash", "Ghost"], ult: "120s / 110s / 100s", cheese: false, pros: "Ignore son proxy, farme sous tour. R pour le rattraper.", cons: "Ne le poursuis jamais dans le poison. Anti-heal." },
            { id: "Gwen", name: "Gwen", diff: "medium", img: "Gwen", spells: ["Flash", "Ignite"], ult: "120s / 100s / 80s", cheese: true, pros: "Tu la bats early. Esquive le centre du Q.", cons: "Outscale √©norme. W (Brume) annule ton R de loin." },
            { id: "Pantheon", name: "Pantheon", diff: "easy", img: "Pantheon", spells: ["Flash", "Ignite"], ult: "180s / 165s / 150s", cheese: false, pros: "Ton E tank son combo complet. Tu r√©g√®nes son poke.", cons: "Son E bloque tes attaques." },
            { id: "Rumble", name: "Rumble", diff: "medium", img: "Rumble", spells: ["Flash", "Ignite"], ult: "100s / 85s / 70s", cheese: false, pros: "Crains-le quand il a sa barre jaune/rouge. Sinon fonce.", cons: "D√©g√¢ts √©normes sans items." },
            { id: "Gragas", name: "Gragas", diff: "medium", img: "Gragas", spells: ["Flash", "Teleport"], ult: "120s / 100s / 80s", cheese: false, pros: "Q-hold son Dash (E) pour passer derri√®re.", cons: "Trop de sustain, dur √† tuer. Phase Rush recommand√©." },
            { id: "Garen", name: "Garen", diff: "medium", img: "Garen", spells: ["Flash", "Barrier"], ult: "120s / 100s / 80s", cheese: false, pros: "Utilise E quand il fonce. Heal sur sbires.", cons: "R + Ignite t'ex√©cute de loin." },
            { id: "Teemo", name: "Teemo", diff: "easy", img: "Teemo", spells: ["Flash", "Ignite"], ult: "30s / 25s / 20s", cheese: false, pros: "Lvl 6 : R + Ignite = Kill. Q suit son Flash.", cons: "Blind emp√™che le soin." },
            { id: "Sett", name: "Sett", diff: "hard", img: "Sett", spells: ["Flash", "Barrier"], ult: "120s / 100s / 80s", cheese: false, pros: "Q-hold pour passer derri√®re son Z.", cons: "Burst √©norme." },
            { id: "Jax", name: "Jax", diff: "medium", img: "Jax", spells: ["Flash", "Barrier"], ult: "80s (Flat)", cheese: false, pros: "Active E pendant son h√©lico.", cons: "Outscale tr√®s fort." },
            { id: "Fiora", name: "Fiora", diff: "hard", img: "Fiora", spells: ["Flash", "Ignite"], ult: "110s / 90s / 70s", cheese: true, pros: "Colle-toi aux murs. Cheese lvl 1 possible.", cons: "Si elle pare ton Fear, tu es mort." },
            { id: "Renekton", name: "Renekton", diff: "medium", img: "Renekton", spells: ["Flash", "Barrier"], ult: "120s (Flat)", cheese: false, pros: "Ton E tank son burst.", cons: "Son Z renforc√© brise ton bouclier." },
            { id: "Riven", name: "Riven", diff: "medium", img: "Riven", spells: ["Flash", "Barrier"], ult: "120s / 90s / 60s", cheese: true, pros: "Ton E annule son burst. Cheese lvl 1 si elle Q3 vide.", cons: "Trop mobile." },
            { id: "Irelia", name: "Irelia", diff: "hard", img: "Irelia", spells: ["Flash", "Barrier"], ult: "140s / 120s / 100s", cheese: true, pros: "Fear-la quand elle Q. Cheese lvl 1.", cons: "Si elle a 4 stacks, ne fight pas." },
            { id: "Camille", name: "Camille", diff: "easy", img: "Camille", spells: ["Flash", "Barrier"], ult: "140s / 115s / 90s", cheese: true, pros: "Ton Fear annule son E.", cons: "D√©g√¢ts bruts late game." },
            { id: "Aatrox", name: "Aatrox", diff: "medium", img: "Aatrox", spells: ["Flash", "Ignite"], ult: "120s / 100s / 80s", cheese: false, pros: "Q-hold pour esquiver ses zones.", cons: "Anti-heal obligatoire." },
            { id: "Malphite", name: "Malphite", diff: "easy", img: "Malphite", spells: ["Flash", "Barrier"], ult: "130s / 105s / 80s", cheese: false, pros: "Dive-le avec R.", cons: "Utile en teamfight." },
            { id: "Sion", name: "Sion", diff: "easy", img: "Sion", spells: ["Flash", "Barrier"], ult: "140s / 100s / 60s", cheese: true, pros: "Q-hold annule son A. Cheese lvl 1.", cons: "Revient toujours." },
            { id: "Ornn", name: "Ornn", diff: "medium", img: "Ornn", spells: ["Flash", "Teleport"], ult: "140s / 120s / 100s", cheese: false, pros: "Annule son R avec ton R.", cons: "Tr√®s tanky." },
            { id: "Shen", name: "Shen", diff: "easy", img: "Shen", spells: ["Flash", "Teleport"], ult: "200s / 180s / 160s", cheese: false, pros: "Annule son R avec E.", cons: "Sa zone W bloque tes attaques." },
            { id: "TahmKench", name: "Tahm Kench", diff: "hard", img: "TahmKench", spells: ["Flash", "Barrier"], ult: "120s / 100s / 80s", cheese: false, pros: "Farm.", cons: "Te bat en duel." },
            { id: "Chogath", name: "Cho'Gath", diff: "medium", img: "Chogath", spells: ["Flash", "Barrier"], ult: "80s (Flat)", cheese: false, pros: "Esquive son Q.", cons: "R t'ex√©cute t√¥t." },
            { id: "Mundo", name: "Dr. Mundo", diff: "easy", img: "DrMundo", spells: ["Flash", "Ignite"], ult: "110s (Flat)", cheese: true, pros: "Ton soin bat le sien. Cheese lvl 1.", cons: "Prends anti-heal." },
            { id: "KSante", name: "K'Sante", diff: "medium", img: "KSante", spells: ["Flash", "Ghost"], ult: "120s / 100s / 80s", cheese: false, pros: "Pas assez de d√©g√¢ts early.", cons: "Beaucoup de CC." },
            { id: "Vayne", name: "Vayne", diff: "hard", img: "Vayne", spells: ["Flash", "Ghost"], ult: "100s / 85s / 70s", cheese: false, pros: "Si tu touches R, elle meurt.", cons: "Te kite √† l'infini." },
            { id: "Quinn", name: "Quinn", diff: "hard", img: "Quinn", spells: ["Flash", "Ghost"], ult: "140s / 115s / 90s", cheese: false, pros: "Suis-la avec passif.", cons: "Aveuglement." },
            { id: "Jayce", name: "Jayce", diff: "medium", img: "Jayce", spells: ["Flash", "Ghost"], ult: "N/A", cheese: false, pros: "Active E s'il passe marteau.", cons: "Poke fort." },
            { id: "Kennen", name: "Kennen", diff: "medium", img: "Kennen", spells: ["Flash", "Barrier"], ult: "120s", cheese: false, pros: "Q suit son dash.", cons: "Stun p√©nible." },
            { id: "Gnar", name: "Gnar", diff: "medium", img: "Gnar", spells: ["Flash", "Ghost"], ult: "90s / 60s / 30s", cheese: false, pros: "Tue-le petit.", cons: "Mega-Gnar CC." },
            { id: "Kayle", name: "Kayle", diff: "easy", img: "Kayle", spells: ["Flash", "Ghost"], ult: "160s / 120s / 80s", cheese: true, pros: "Abuse-la pr√©-6. Dive.", cons: "Niveau 16 = Perdu." },
            { id: "Urgot", name: "Urgot", diff: "medium", img: "Urgot", spells: ["Flash", "Barrier"], ult: "100s / 85s / 70s", cheese: false, pros: "R permet de regen au dessus execute.", cons: "Tourne autour." },
            { id: "Tryndamere", name: "Tryndamere", diff: "medium", img: "Tryndamere", spells: ["Flash", "Barrier"], ult: "130s / 110s / 90s", cheese: false, pros: "Kite son R avec Fear.", cons: "Critique lvl 1." },
            { id: "Volibear", name: "Volibear", diff: "hard", img: "Volibear", spells: ["Flash", "Barrier"], ult: "160s / 140s / 120s", cheese: false, pros: "Esquive E.", cons: "Se soigne autant que toi." },
            { id: "Olaf", name: "Olaf", diff: "hard", img: "Olaf", spells: ["Flash", "Barrier"], ult: "100s / 90s / 80s", cheese: false, pros: "Ne fight pas lvl 1.", cons: "R annule tes CC." },
            { id: "Yorick", name: "Yorick", diff: "medium", img: "Yorick", spells: ["Flash", "Tp"], ult: "160s / 130s / 100s", cheese: false, pros: "Tue les goules.", cons: "Bloqu√© dans cage = mort." },
            { id: "Illaoi", name: "Illaoi", diff: "hard", img: "Illaoi", spells: ["Flash", "Barrier"], ult: "120s / 105s / 90s", cheese: false, pros: "Esquive E.", cons: "E + R = Mort." },
            { id: "Nasus", name: "Nasus", diff: "easy", img: "Nasus", spells: ["Flash", "Ghost"], ult: "120s", cheese: true, pros: "D√©truis-le early.", cons: "Wither (W) casse ta vitesse." },
            { id: "Mordekaiser", name: "Mordekaiser", diff: "medium", img: "Mordekaiser", spells: ["Flash", "Barrier"], ult: "140s / 120s / 100s", cheese: false, pros: "Q-hold esquive son A.", cons: "Te vole tes stats." },
            { id: "Yone", name: "Yone", diff: "easy", img: "Yone", spells: ["Flash", "Barrier"], ult: "120s / 100s / 80s", cheese: true, pros: "Fragile. E le d√©truit.", cons: "Garde R pour apr√®s son E." },
            { id: "Akali", name: "Akali", diff: "hard", img: "Akali", spells: ["Flash", "Barrier"], ult: "100s / 80s / 60s", cheese: false, pros: "R√©v√®le-la avec R.", cons: "W (Linceul) annule tes attaques." }
        ];

        const grid = document.getElementById('grid');
        const search = document.getElementById('searchInput');
        const modal = document.getElementById('modal');
        const mTitle = document.getElementById('modal-title');
        const mHeader = document.getElementById('modal-header');
        const mPros = document.getElementById('modal-pros');
        const mCons = document.getElementById('modal-cons');
        const mNotes = document.getElementById('user-notes');
        const mSpells = document.getElementById('summoner-spells');
        const mUlt = document.getElementById('ult-timer-display');
        const mYoutube = document.getElementById('youtube-container');
        const saveBtn = document.getElementById('save-btn');
        const saveMsg = document.getElementById('save-msg');
        const closeBtn = document.querySelector('.close-btn');
        const statsDisplay = document.getElementById('stats-display');
        const sortNameBtn = document.getElementById('sort-name');
        const sortWrBtn = document.getElementById('sort-wr');
        // HUD Elements
        const hudContainer = document.getElementById('hud-container');
        const hudSpellsWrapper = document.getElementById('hud-spells-wrapper');

        let sortBy = 'name';
        let sortDirection = 'asc';
        let currentId = null;

        function changeSkin(skinId) {
            document.body.style.backgroundImage = `url('https://ddragon.leagueoflegends.com/cdn/img/champion/splash/Warwick_${skinId}.jpg')`;
        }

        function sortData(criteria) {
            if (sortBy === criteria) {
                sortDirection = sortDirection === 'asc' ? 'desc' : 'asc';
            } else {
                sortBy = criteria;
                sortDirection = criteria === 'wr' ? 'desc' : 'asc';
            }
            sortNameBtn.classList.toggle('active', criteria === 'name');
            sortWrBtn.classList.toggle('active', criteria === 'wr');
            render(search.value);
        }

        function render(filterText = "") {
            if(!grid) return;
            grid.innerHTML = "";
            let filtered = data.filter(c => c.name.toLowerCase().includes(filterText.toLowerCase()));

            filtered = filtered.map(c => {
                const s = getStats(c.id);
                const total = s.wins + s.losses;
                const wrValue = total > 0 ? (s.wins / total) * 100 : -1; 
                return { ...c, wrValue };
            });

            filtered.sort((a, b) => {
                if (sortBy === 'name') {
                    return sortDirection === 'asc' ? a.name.localeCompare(b.name) : b.name.localeCompare(a.name);
                } else if (sortBy === 'wr') {
                    return sortDirection === 'asc' ? a.wrValue - b.wrValue : b.wrValue - a.wrValue;
                }
            });

            if (filtered.length === 0) {
                grid.innerHTML = "<p style='text-align:center; width:100%; color:#555;'>Aucun champion trouv√©.</p>";
                return;
            }

            filtered.forEach(c => {
                const div = document.createElement('div');
                div.className = 'card';
                const wrDisplay = c.wrValue >= 0 ? Math.round(c.wrValue) + "%" : "-";
                const cheeseHtml = c.cheese ? '<div class="cheese-icon" title="Win Level 1">üßÄ</div>' : '';
                div.innerHTML = `
                    ${cheeseHtml}
                    <div class="card-wr-badge">${wrDisplay} WR</div>
                    <img src="https://ddragon.leagueoflegends.com/cdn/img/champion/splash/${c.img}_0.jpg" loading="lazy">
                    <span class="difficulty ${c.diff}">${c.diff.toUpperCase()}</span>
                    <h3>${c.name}</h3>
                `;
                div.onclick = () => openModal(c);
                grid.appendChild(div);
            });
        }

        function openModal(c) {
            currentId = c.id;
            selectedChampion = c; // Stock pour le mode HUD
            mTitle.innerText = c.name.toUpperCase();
            mHeader.style.backgroundImage = `url('https://ddragon.leagueoflegends.com/cdn/img/champion/splash/${c.img}_0.jpg')`;
            mPros.innerText = c.pros;
            mCons.innerText = c.cons;
            
            // GENERATION DU TRACKER (MODAL)
            mSpells.innerHTML = c.spells.map(spell => {
                return `
                <div class="spell-wrapper" id="spell-btn-${spell}" onclick="toggleSpellTimer('${c.id}', '${spell}')" title="Cliquer pour lancer le timer">
                    <img src="${spellUrl(spell)}" class="spell-icon">
                    <div class="spell-timer-overlay" id="timer-overlay-${spell}"></div>
                </div>`;
            }).join('');
            
            c.spells.forEach(spell => updateSpellUI(c.id, spell));

            mUlt.innerHTML = `R CD: <span>${c.ult || 'N/A'}</span>`;
            mYoutube.innerHTML = `<a href="https://www.youtube.com/results?search_query=Warwick+vs+${c.name}+Top+Challenger+DomisumReplay" target="_blank" class="youtube-btn"><i class="fab fa-youtube"></i> VOIR REPLAY</a>`;

            mNotes.value = localStorage.getItem(`ww_note_${c.id}`) || "";
            updateStatsUI(c.id);
            modal.style.display = "block";
            saveMsg.style.opacity = "0";
        }

        // --- HUD LOGIC ---
        function toggleHUD(isActive) {
            const body = document.body;
            if(isActive && selectedChampion) {
                // Active le mode HUD
                body.classList.add('hud-active');
                
                // G√©n√®re les sorts version G√âANTE
                hudSpellsWrapper.innerHTML = selectedChampion.spells.map(spell => {
                    return `
                    <div class="hud-spell-box" id="hud-spell-btn-${spell}" onclick="toggleSpellTimer('${selectedChampion.id}', '${spell}')">
                        <img src="${spellUrl(spell)}" class="hud-spell-img">
                        <div class="hud-timer-text" id="hud-timer-overlay-${spell}"></div>
                    </div>`;
                }).join('');
                
                // Active l'UI
                selectedChampion.spells.forEach(spell => updateSpellUI(selectedChampion.id, spell));

            } else {
                // D√©sactive
                body.classList.remove('hud-active');
            }
        }

        // --- TRACKER FUNCTIONS (G√®re les deux UIs : Modal et HUD) ---
        function toggleSpellTimer(champId, spell) {
            const timerKey = `${champId}_${spell}`;
            const cd = spellCDs[spell] || 300; 

            if (activeTimers[timerKey] && activeTimers[timerKey].endTime > Date.now()) {
                delete activeTimers[timerKey]; 
                updateSpellUI(champId, spell);
            } else {
                activeTimers[timerKey] = { endTime: Date.now() + (cd * 1000) }; 
                updateSpellUI(champId, spell);
            }
        }

        function updateSpellUI(champId, spell) {
            // UI MODAL
            const modalWrapper = document.getElementById(`spell-btn-${spell}`);
            const modalOverlay = document.getElementById(`timer-overlay-${spell}`);
            
            // UI HUD
            const hudWrapper = document.getElementById(`hud-spell-btn-${spell}`);
            const hudOverlay = document.getElementById(`hud-timer-overlay-${spell}`);

            const timerKey = `${champId}_${spell}`;
            const timerData = activeTimers[timerKey];

            // On utilise un intervalle global pour √©viter les conflits, ou on check juste l'√©tat
            // Pour simplifier, on relance la logique de check
            
            // Nettoyage ancien intervalle stock√© sur l'objet window (global) pour ce spell
            if(window[`interval_${timerKey}`]) clearInterval(window[`interval_${timerKey}`]);

            if (timerData && timerData.endTime > Date.now()) {
                if(modalWrapper) modalWrapper.classList.add('active-cd');
                if(hudWrapper) hudWrapper.classList.add('active-cd');
                
                const tick = () => {
                    const remaining = Math.ceil((timerData.endTime - Date.now()) / 1000);
                    if(remaining <= 0) {
                        delete activeTimers[timerKey];
                        if(modalWrapper) modalWrapper.classList.remove('active-cd');
                        if(hudWrapper) hudWrapper.classList.remove('active-cd');
                        clearInterval(window[`interval_${timerKey}`]);
                    } else {
                        if(modalOverlay) modalOverlay.innerText = remaining;
                        if(hudOverlay) hudOverlay.innerText = remaining;
                    }
                };
                
                tick();
                window[`interval_${timerKey}`] = setInterval(tick, 1000);
            } else {
                if(modalWrapper) modalWrapper.classList.remove('active-cd');
                if(hudWrapper) hudWrapper.classList.remove('active-cd');
            }
        }

        function getStats(id) {
            const s = localStorage.getItem(`ww_stats_${id}`);
            return s ? JSON.parse(s) : { wins: 0, losses: 0 };
        }

        function saveStats(id, stats) {
            localStorage.setItem(`ww_stats_${id}`, JSON.stringify(stats));
            updateStatsUI(id);
            render(search.value);
        }

        function updateStatsUI(id) {
            const s = getStats(id);
            const total = s.wins + s.losses;
            const wr = total > 0 ? Math.round((s.wins / total) * 100) : 0;
            let color = "#fff";
            if(total > 0) {
                if(wr >= 55) color = "#2ecc71";
                else if(wr < 45) color = "#e74c3c";
                else color = "#f1c40f";
            }
            statsDisplay.innerHTML = `<span style="color:${color}; font-size:1.8rem; margin:0;">${wr}% WR</span> <span>(${s.wins}V - ${s.losses}D)</span>`;
        }

        window.addWin = () => { if(!currentId) return; const s = getStats(currentId); s.wins++; saveStats(currentId, s); }
        window.addLoss = () => { if(!currentId) return; const s = getStats(currentId); s.losses++; saveStats(currentId, s); }
        window.resetStats = () => { 
            if(!currentId) return; 
            if(confirm("Remettre les stats de ce champion √† z√©ro ?")) {
                saveStats(currentId, { wins: 0, losses: 0 });
            }
        }

        saveBtn.onclick = () => {
            if(currentId) {
                localStorage.setItem(`ww_note_${currentId}`, mNotes.value);
                saveMsg.style.opacity = "1";
                setTimeout(() => { saveMsg.style.opacity = "0"; }, 2000);
            }
        };

        search.oninput = (e) => render(e.target.value);
        closeBtn.onclick = () => modal.style.display = "none";
        window.onclick = (e) => { if(e.target == modal) modal.style.display = "none"; };

        render();
    </script>
</body>
</html>
